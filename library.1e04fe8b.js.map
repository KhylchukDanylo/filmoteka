{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-5befe2f8db9d286c.js","src/js/header-library.js","node_modules/@parcel/runtime-js/lib/runtime-da5eaf6f8d6862b1.js","src/js/gallery.js","src/js/logout.js","src/js/library.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"bHX8u\\\":\\\"library.1e04fe8b.js\\\",\\\"8YLc8\\\":\\\"437973.e7e6a80d.webp\\\",\\\"fRoIN\\\":\\\"library.5accb9eb.js\\\"}\"));","const throttle = require('lodash.throttle');\nimport { refs } from './DOM-elements';\nimport {\n  CURRENT_PAGE,\n  TOTAL_PAGES,\n  CURRENT_STATE,\n  MOVIE_TO_SEARCH,\n} from './pagination';\nconst { logoFromLibrarysHeader, logoFromLibrarysFixedHeader } = refs;\nimport {\n  showWatchedList,\n  showQueueList,\n  parsedWatchedList,\n  parsedQueueList,\n} from './gallery';\n\nlet header = document.querySelector('.header-library');\nlet fixedHeader = document.querySelector('.fixed-header');\nlet headerHeight = header.clientHeight;\n\nlogoFromLibrarysHeader.addEventListener('click', onLogoClick);\nlogoFromLibrarysFixedHeader.addEventListener('click', onLogoClick);\n\nconst watchedBtn = Array.from(document.querySelectorAll('#watched'));\nconst queueBtn = Array.from(document.querySelectorAll('#queue'));\n\nwindow.addEventListener('scroll', throttle(showFixedHeader, 200));\nheader.addEventListener('click', onBtnClick);\n\nfunction showFixedHeader() {\n  if (window.pageYOffset > headerHeight) {\n    fixedHeader.classList.remove('is-hidden');\n  } else {\n    fixedHeader.classList.add('is-hidden');\n  }\n}\n\nfunction onBtnClick(e) {\n  if (e.target.id === 'watched') {\n    localStorage.setItem('openedPage', 'watched');\n    showWatchedList(parsedWatchedList);\n    watchedBtn.forEach(element => {\n      element.classList.add('btn-active');\n    });\n    queueBtn.forEach(element => {\n      element.classList.remove('btn-active');\n    });\n  } else if (e.target.id === 'queue') {\n    localStorage.setItem('openedPage', 'queue');\n    showQueueList(parsedQueueList);\n    watchedBtn.forEach(element => {\n      element.classList.remove('btn-active');\n    });\n    queueBtn.forEach(element => {\n      element.classList.add('btn-active');\n    });\n  }\n}\n\nfunction onLogoClick() {\n  console.log('logolibrary');\n  localStorage.removeItem(CURRENT_PAGE);\n  localStorage.removeItem(TOTAL_PAGES);\n  localStorage.removeItem(CURRENT_STATE);\n  localStorage.removeItem(MOVIE_TO_SEARCH);\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"8YLc8\")).toString();","import defaultImg from '../images/437973.webp';\nimport { fetchMovieById } from './api-service';\nimport { addSpinner } from './spinner';\nimport { removeSpinner } from './spinner';\nimport { closeModal, removeFromWached, removeFromQueue } from './modal-movie-render';\nimport { genresMaker } from './templates/genres-maker';\n\nconst movieList = document.querySelector('.movie');\nconst containerNothing = document.querySelector('.wrap-gallery');\nconst watchedList = localStorage.getItem('wached-movies');\nconst parsedWatchedList = JSON.parse(watchedList) || [];\nconst queueList = localStorage.getItem('queue-movies');\nconst parsedQueueList = JSON.parse(queueList) || [];\n\nexport { showWatchedList, showQueueList, parsedWatchedList, parsedQueueList };\nlet moviesList = [];\nconst watchedBtn = Array.from(document.querySelectorAll('#watched'));\nconst queueBtn = Array.from(document.querySelectorAll('#queue'));\n    \ntry {\n  const openedPage = localStorage.getItem('openedPage');\n  if (openedPage === null) {\n    throw new Error();\n  }\n  if (openedPage === 'watched') {\n    clear();\n    showWatchedList(parsedWatchedList);\n    watchedBtn.forEach(element => {\n      element.classList.add('btn-active');\n    });\n    queueBtn.forEach(element => {\n      element.classList.remove('btn-active');\n    });\n  } else if (openedPage === 'queue') { \n    clear();\n    showQueueList(parsedQueueList);\n    watchedBtn.forEach(element => {\n      element.classList.remove('btn-active');\n    });\n    queueBtn.forEach(element => {\n      element.classList.add('btn-active');\n    });\n  }\n} catch {\n  clear();\n  showWatchedList(parsedWatchedList);\n}\n  \nwindow.addEventListener('click', e => {\n\n  if (e.target.id === 'btn-watched') {\n      const movieId = e.target.nextElementSibling.id;\n    closeModal();\n    clear();\n    document.location.assign('./library.html');\n  }\n  if (e.target.id === 'btn-queue') {\n    const movieId = e.target.previousElementSibling.id;\n    closeModal();\n    clear();\n    document.location.assign('./library.html');\n  }\n});\n\n\n\nfunction showWatchedList(list) {\n  if (parsedWatchedList.length > 0) {\n    containerNothing.style.display = 'none';\n  } else {\n    containerNothing.style.display = 'block';\n  }\n  moviesList = [];\n  clear();\n  list.forEach(id => {\n    createMovieList(id);\n  });\n}\n\nfunction showQueueList(list) {\n  if (parsedQueueList.length > 0) {\n    containerNothing.style.display = 'none';\n  } else {\n    containerNothing.style.display = 'block';\n  }\n  moviesList = [];\n  clear();\n  list.forEach(id => {\n    createMovieList(id);\n  });\n}\n\nfunction clear() {\n  movieList.innerHTML = '';\n}\n\n// showWatchedList(parsedWatchedList);\n\nasync function createMovieList(id) {\n  try {\n    const response = await fetchMovieById(id);\n\n    let moviesData = {\n      id: response.data.id,\n      poster: response.data.poster_path,\n      title: response.data.original_title,\n      genres: response.data.genres.map(genre => genre.name),\n      year: response.data?.release_date?.slice(0, 4) || 'N/A',\n      rating: response.data.vote_average.toFixed(1),\n    };\n    moviesList.push(moviesData);\n\n    switch (true) {\n      case moviesData.genres.length > 0 && moviesData.genres.length <= 2:\n        moviesData.genres = moviesData.genres.join(', ');\n        break;\n      case moviesData.genres.length > 2:\n        moviesData.genres[2] = 'Other';\n        moviesData.genres = moviesData.genres.slice(0, 3).join(', ');\n        break;\n      default:\n        moviesData.genres = 'N/A';\n        break;\n    }\n\n\n    renderMoviesCard(moviesList);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction renderMoviesCard(moviesList) {\n  const markup = moviesList\n    .map(({ id, poster, title, genres, year, rating }) => {\n      return `<li class=\"movie__item\" id=\"${id}\">\n        <a href=\"#\" class=\"movie__link\" >\n        <div class=\"movie__wrapper\" >\n        <picture>\n            <source\n              media=\"(min-width:1200px)\"\n\n              srcset=\"${\n                poster ? `https://image.tmdb.org/t/p/w500${poster}` : defaultImg\n              }\"\n              type=\"image/jpeg\"\n            />\n            <source\n              media=\"(min-width:768px)\"\n              srcset=\"${\n                poster\n                  ? `https://image.tmdb.org/t/p/w342/${poster}`\n                  : defaultImg\n              }\"\n              type=\"image/jpeg\"\n            />\n            <source\n              media=\"(max-width:767px)\"\n\n              srcset=\"${\n                poster\n                  ? `https://image.tmdb.org/t/p/w342/${poster}`\n                  : defaultImg\n              }\"\n              type=\"image/jpeg\"\n            />\n\n            <img\n              class=\"movie-image\"\n              src=\"${\n                poster\n                  ? `https://image.tmdb.org/t/p/w500/${poster}`\n                  : defaultImg\n              }\"\n              loading=\"lazy\"\n              alt=\"${title}\"\n              width=\"395\"\n              height=\"574\"\n            />\n          </picture>\n\n        </div>\n\n        <div class=\"movie__text\"><h3 class=\"movie__name\">${title}</h3>\n        <p class=\"movie__genre\" data-id=\"${id}\">${genres} | ${year}</p></div>\n          ${\n            !rating || rating == '0.0'\n              ? `<div class=\"movie__rating movie__rating--grey\">NA</div>`\n              : `<div class=\"movie__rating movie__rating--${getClassByVote(\n                  rating\n                )}\">${rating}</div>`\n          }\n\n        </a>\n        </li>`;\n    })\n    .join('');\n\n  movieList.innerHTML = markup;\n}\n\nfunction getClassByVote(vote) {\n  if (vote >= 7) {\n    return 'green';\n  } else if (vote >= 5) {\n    return 'orange';\n  } else {\n    return 'red';\n  }\n}\n\nif(document.location.pathname === '/library.html'){\n  console.log('you are here');\n}\n\n","import { Notify } from 'notiflix';\nimport { refs } from './DOM-elements';\nconst { logoutButton } = refs;\nconst trailerNotifyOptions = {\n  position: 'center-top',\n  timeout: 1500,\n  fontFamily: 'Roboto',\n};\n\nlogoutButton.addEventListener('click', logoutHandling);\n\nfunction logoutHandling(event) {\n  event.preventDefault();\n  Notify.info('you have logged out', trailerNotifyOptions);\n  Notify.warning('redirect to main page', trailerNotifyOptions);\n  window.setTimeout(() => document.location.assign('./index.html'), 3000);\n}\n","import './header-library';\nimport './spinner';\nimport './gallery';\nimport './modal-movie-render';\nimport './contributors-modal';\nimport './trailer';\nimport './logout';\nimport './contributors-modal';\n\nimport { addSpinner } from './spinner';\nimport { removeSpinner } from './spinner';\n\naddSpinner();\nwindow.addEventListener('load', function (e) {\n  removeSpinner();\n});\n"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$2aMrB","$a8d56eb1fa148c12$exports","URL","resolve","import","meta","url","toString","$7c59f4ec4043ce00$var$movieList","document","querySelector","$7c59f4ec4043ce00$var$containerNothing","$7c59f4ec4043ce00$var$watchedList","localStorage","getItem","$7c59f4ec4043ce00$export$8b49dd5ea0c3af0f","$7c59f4ec4043ce00$var$queueList","$7c59f4ec4043ce00$export$b5a0089ed05c76c6","$7c59f4ec4043ce00$var$moviesList","$7c59f4ec4043ce00$var$watchedBtn","Array","from","querySelectorAll","$7c59f4ec4043ce00$var$queueBtn","openedPage","$7c59f4ec4043ce00$var$clear","$7c59f4ec4043ce00$export$b52540d2a5d5823f","forEach","element","classList","add","remove","$7c59f4ec4043ce00$export$9eec02b92d32924a","list","style","display","$7c59f4ec4043ce00$var$createMovieList","innerHTML","async","response","$7me8F","fetchMovieById","moviesData","data","poster","poster_path","title","original_title","genres","map","genre","name","year","release_date","slice","rating","vote_average","toFixed","push","join","moviesList","markup","$parcel$interopDefault","vote","$7c59f4ec4043ce00$var$renderMoviesCard","error","console","log","window","addEventListener","e","target","nextElementSibling","$jHZAQ","closeModal","location","assign","previousElementSibling","pathname","logoFromLibrarysHeader","$aa1852bce7d92573$var$logoFromLibrarysHeader","logoFromLibrarysFixedHeader","$aa1852bce7d92573$var$logoFromLibrarysFixedHeader","refs","$aa1852bce7d92573$var$header","$aa1852bce7d92573$var$fixedHeader","$aa1852bce7d92573$var$headerHeight","clientHeight","$aa1852bce7d92573$var$onLogoClick","$aa1852bce7d92573$var$watchedBtn","$aa1852bce7d92573$var$queueBtn","removeItem","$2nhTy","CURRENT_PAGE","TOTAL_PAGES","CURRENT_STATE","MOVIE_TO_SEARCH","$9OeKo","pageYOffset","setItem","$eWCmQ","logoutButton","$54a053e508af4671$var$logoutButton","$54a053e508af4671$var$trailerNotifyOptions","position","timeout","fontFamily","event","preventDefault","Notify","info","warning","setTimeout","addSpinner","$04jNI","removeSpinner"],"version":3,"file":"library.1e04fe8b.js.map"}